{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\AbdulRashid\\\\Desktop\\\\pesto\\\\Project\\\\ninja\\\\n7-medicalinventory-fullstack-eta-1-7\\\\src\\\\App.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from \"react\";\nimport \"./App.css\";\nimport { Route, BrowserRouter as Router, Switch } from \"react-router-dom\";\nimport LoginScreen from \"./screens/LoginScreen/LoginScreen\";\nimport HomeScreen from \"./screens/HomeScreen/HomeScreen\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { createTokenAsync, log, logout, selectIsAdmin, selectLoggedIn, selectUser } from \"./features/login/loginSlice\";\nimport Landing from \"./screens/LoginScreen/Landing\";\nimport Employee from \"./screens/Employee/Employee\";\nimport ErrorBoundry from \"./components/ErrorBoundary/ErrorBoundary\";\nimport { AUTH_TOKEN } from \"./localStorage\";\nimport Loader from \"./components/Loader/Loader\";\nimport axios from './axios';\nimport { useHistory } from \"react-router\";\nimport ls from 'local-storage';\nimport { currentShop } from \"./features/shop/shopSlice\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Checkout = /*#__PURE__*/React.lazy(_c = () => import(\n/* webpackChunkName: 'checkout' */\n\"./screens/Checkout/Checkout\"));\n_c2 = Checkout;\nconst SearchPage = /*#__PURE__*/React.lazy(_c3 = () => import(\n/* webpackChunkName: 'checkout' */\n\"./screens/SearchPage/SearchPage\"));\n_c4 = SearchPage;\nconst Medicine = /*#__PURE__*/React.lazy(_c5 = () => import(\n/* webpackChunkName: 'checkout' */\n\"./screens/Medicine/Medicine\"));\n_c6 = Medicine;\n\nfunction App() {\n  _s();\n\n  const loggedIn = useSelector(selectLoggedIn);\n  const isAdmin = useSelector(selectIsAdmin);\n  const dispatch = useDispatch();\n  const history = useHistory();\n  console.log(loggedIn);\n  const shops = useSelector(state => state.shop.shops);\n\n  const checkTokenValidation = async () => {\n    try {\n      const response = await axios.post('/api-token-auth/', {}, {\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Token ${ls.get('token')}`\n        }\n      });\n      dispatch(log({\n        admin: response.data.isAdmin,\n        employee: response.data.employeeId,\n        company: response.data.companyId\n      }));\n\n      if (!response.data.isAdmin) {\n        dispatch(currentShop(response.data.companyId));\n      }\n    } catch (error) {\n      dispatch(logout());\n    }\n  };\n\n  useEffect(() => {\n    const token = AUTH_TOKEN;\n    console.log(token);\n\n    if (token) {\n      checkTokenValidation();\n    }\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app\",\n    children: /*#__PURE__*/_jsxDEV(Router, {\n      children: !loggedIn ? /*#__PURE__*/_jsxDEV(LoginScreen, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(React.Suspense, {\n          fallback: /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 39\n          }, this),\n          children: /*#__PURE__*/_jsxDEV(ErrorBoundry, {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"app-wrapper\",\n              children: /*#__PURE__*/_jsxDEV(Switch, {\n                children: [/*#__PURE__*/_jsxDEV(Route, {\n                  exact: true,\n                  path: \"/\",\n                  component: shops.length === 0 ? Landing : HomeScreen\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 87,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Route, {\n                  path: \"/employee\",\n                  component: Employee\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 92,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Route, {\n                  path: \"/search/:params?\",\n                  component: SearchPage\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 93,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Route, {\n                  path: \"/checkout\",\n                  component: Checkout\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 94,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Route, {\n                  path: \"/medicine\",\n                  component: Medicine\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 95,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 85,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 13\n        }, this)\n      }, void 0, false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"622jB5J1eqwLDh1iGhiAK4cEljw=\", false, function () {\n  return [useSelector, useSelector, useDispatch, useHistory, useSelector];\n});\n\n_c7 = App;\nexport default App;\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7;\n\n$RefreshReg$(_c, \"Checkout$React.lazy\");\n$RefreshReg$(_c2, \"Checkout\");\n$RefreshReg$(_c3, \"SearchPage$React.lazy\");\n$RefreshReg$(_c4, \"SearchPage\");\n$RefreshReg$(_c5, \"Medicine$React.lazy\");\n$RefreshReg$(_c6, \"Medicine\");\n$RefreshReg$(_c7, \"App\");","map":{"version":3,"sources":["C:/Users/AbdulRashid/Desktop/pesto/Project/ninja/n7-medicalinventory-fullstack-eta-1-7/src/App.js"],"names":["React","useEffect","Route","BrowserRouter","Router","Switch","LoginScreen","HomeScreen","useDispatch","useSelector","createTokenAsync","log","logout","selectIsAdmin","selectLoggedIn","selectUser","Landing","Employee","ErrorBoundry","AUTH_TOKEN","Loader","axios","useHistory","ls","currentShop","Checkout","lazy","SearchPage","Medicine","App","loggedIn","isAdmin","dispatch","history","console","shops","state","shop","checkTokenValidation","response","post","headers","get","admin","data","employee","employeeId","company","companyId","error","token","length"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\r\nimport \"./App.css\";\r\nimport { Route, BrowserRouter as Router, Switch } from \"react-router-dom\";\r\nimport LoginScreen from \"./screens/LoginScreen/LoginScreen\";\r\nimport HomeScreen from \"./screens/HomeScreen/HomeScreen\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  createTokenAsync,\r\n  log,\r\n  logout,\r\n  selectIsAdmin,\r\n  selectLoggedIn,\r\n  selectUser,\r\n} from \"./features/login/loginSlice\";\r\nimport Landing from \"./screens/LoginScreen/Landing\";\r\nimport Employee from \"./screens/Employee/Employee\";\r\n\r\nimport ErrorBoundry from \"./components/ErrorBoundary/ErrorBoundary\";\r\nimport { AUTH_TOKEN } from \"./localStorage\";\r\nimport Loader from \"./components/Loader/Loader\";\r\nimport axios from './axios'\r\nimport { useHistory } from \"react-router\";\r\nimport ls from 'local-storage'\r\nimport { currentShop } from \"./features/shop/shopSlice\";\r\nconst Checkout = React.lazy(() =>\r\n  import(/* webpackChunkName: 'checkout' */ \"./screens/Checkout/Checkout\")\r\n);\r\n\r\nconst SearchPage = React.lazy(() =>\r\n  import(/* webpackChunkName: 'checkout' */ \"./screens/SearchPage/SearchPage\")\r\n);\r\n\r\nconst Medicine = React.lazy(() =>\r\n  import(/* webpackChunkName: 'checkout' */ \"./screens/Medicine/Medicine\")\r\n);\r\n\r\n\r\n\r\nfunction App() {\r\n  const loggedIn = useSelector(selectLoggedIn);\r\n  const isAdmin = useSelector(selectIsAdmin);\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  console.log(loggedIn);\r\n  const shops = useSelector((state) => state.shop.shops);\r\n  const checkTokenValidation = async () => {\r\n    try {\r\n        const response = await axios.post('/api-token-auth/',{},{\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': `Token ${ls.get('token')}`\r\n            },\r\n          })\r\n        dispatch(log({admin:response.data.isAdmin,employee:response.data.employeeId,company:response.data.companyId}))\r\n        if(!(response.data.isAdmin)){\r\n          dispatch(currentShop(response.data.companyId))\r\n        }\r\n        \r\n    } \r\n      catch (error) {\r\n        dispatch(logout())\r\n\r\n      }\r\n\r\n}\r\n  useEffect(() => {\r\n    const token = AUTH_TOKEN;\r\n    console.log(token);\r\n    if (token) {\r\n      checkTokenValidation()\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"app\">\r\n      <Router>\r\n        {!loggedIn ? (\r\n          <LoginScreen />\r\n        ) : (\r\n          <>\r\n            <React.Suspense fallback={<Loader />}>\r\n              <ErrorBoundry>\r\n         \r\n                <div className=\"app-wrapper\">\r\n                  <Switch>\r\n                  \r\n                    <Route\r\n                      exact\r\n                      path=\"/\"\r\n                      component={shops.length === 0 ? Landing : HomeScreen}\r\n                    ></Route>\r\n                    <Route path=\"/employee\" component={Employee}></Route>\r\n                    <Route path=\"/search/:params?\" component={SearchPage} />\r\n                    <Route path=\"/checkout\" component={Checkout} />\r\n                    <Route path=\"/medicine\" component={Medicine} />\r\n                  </Switch>\r\n                </div>\r\n              </ErrorBoundry>\r\n            </React.Suspense>\r\n          </>\r\n        )}\r\n      </Router>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}