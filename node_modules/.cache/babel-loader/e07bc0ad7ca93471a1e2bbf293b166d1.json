{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\AbdulRashid\\\\Desktop\\\\pesto\\\\Project\\\\ninja\\\\n7-medicalinventory-fullstack-eta-1-7\\\\src\\\\screens\\\\LoginScreen\\\\LoginScreen.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport axios from \"../../axios\";\nimport \"./Login.css\";\nimport { log } from \"../../features/login/loginSlice\";\nimport { useHistory } from \"react-router\";\nimport { setAuthToken } from \"../../localStorage\";\nimport { toast } from \"../../components/Toast/Toast\";\nimport { currentShop } from \"../../features/shop/shopSlice\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction LoginScreen() {\n  _s();\n\n  const [name, setName] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const dispatch = useDispatch();\n  const history = useHistory();\n\n  const handleSubmit = async () => {\n    if (name.trim().length > 0 && password.trim().length > 0) {\n      try {\n        console.log(name, typeof password);\n        const response = await axios.post(\"/api-token-auth/\", {}, {\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          auth: {\n            username: name,\n            password: password\n          }\n        });\n        dispatch(log({\n          admin: response.data.isAdmin,\n          employee: response.data.employeeId,\n          company: response.data.companyId\n        }));\n\n        if (!response.data.isAdmin) {\n          dispatch(currentShop(response.data.companyId));\n        }\n\n        setAuthToken(\"token\", response.data.token);\n        setAuthToken(\"isAdmin\", response.data.isAdmin ? \"true\" : \"false\");\n        history.replace(\"/\");\n      } catch (error) {\n        console.log(error.message);\n        toast.error(\"Authentication denied\");\n      }\n    } else {\n      toast.error(\"no Data\");\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"main\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container__login\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"logo\",\n        children: \"Login Form\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"imgcontainer\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: \"https://www.w3schools.com/howto/img_avatar2.png\",\n          alt: \"Avatar\",\n          className: \"avatar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"login-item\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form form-login\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-field\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"user\",\n              for: \"login-username\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"hidden\",\n                children: \"Username\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 57,\n                columnNumber: 62\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 57,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"login-username\",\n              type: \"text\",\n              className: \"form-input\",\n              value: name,\n              onChange: e => setName(e.target.value),\n              placeholder: \"Username\",\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 58,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-field\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"lock\",\n              for: \"login-password\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"hidden\",\n                children: \"Password\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 62,\n                columnNumber: 62\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 62,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"login-password\",\n              type: \"password\",\n              value: password,\n              onChange: e => setPassword(e.target.value),\n              className: \"form-input\",\n              placeholder: \"Password\",\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 63,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-field\",\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              onClick: handleSubmit,\n              type: \"submit\",\n              value: \"Log in\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 67,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 9\n  }, this);\n}\n\n_s(LoginScreen, \"OURPRvxwNInVLl+vd6/66l+CupU=\", false, function () {\n  return [useDispatch, useHistory];\n});\n\n_c = LoginScreen;\nexport default LoginScreen;\n\nvar _c;\n\n$RefreshReg$(_c, \"LoginScreen\");","map":{"version":3,"sources":["C:/Users/AbdulRashid/Desktop/pesto/Project/ninja/n7-medicalinventory-fullstack-eta-1-7/src/screens/LoginScreen/LoginScreen.js"],"names":["React","useState","useDispatch","useSelector","axios","log","useHistory","setAuthToken","toast","currentShop","LoginScreen","name","setName","password","setPassword","dispatch","history","handleSubmit","trim","length","console","response","post","headers","auth","username","admin","data","isAdmin","employee","employeeId","company","companyId","token","replace","error","message","e","target","value"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,OAAOC,KAAP,MAAkB,aAAlB;AACA,OAAO,aAAP;AACA,SAASC,GAAT,QAAoB,iCAApB;AACA,SAASC,UAAT,QAA2B,cAA3B;AACA,SAASC,YAAT,QAA6B,oBAA7B;AACA,SAASC,KAAT,QAAsB,8BAAtB;AACA,SAASC,WAAT,QAA4B,+BAA5B;;;AAEA,SAASC,WAAT,GAAuB;AAAA;;AACrB,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBX,QAAQ,CAAC,EAAD,CAAhC;AACA,QAAM,CAACY,QAAD,EAAWC,WAAX,IAA0Bb,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAMc,QAAQ,GAAGb,WAAW,EAA5B;AACA,QAAMc,OAAO,GAAGV,UAAU,EAA1B;;AACA,QAAMW,YAAY,GAAG,YAAY;AAC/B,QAAIN,IAAI,CAACO,IAAL,GAAYC,MAAZ,GAAqB,CAArB,IAA0BN,QAAQ,CAACK,IAAT,GAAgBC,MAAhB,GAAyB,CAAvD,EAA0D;AACxD,UAAI;AACFC,QAAAA,OAAO,CAACf,GAAR,CAAYM,IAAZ,EAAkB,OAAOE,QAAzB;AACA,cAAMQ,QAAQ,GAAG,MAAMjB,KAAK,CAACkB,IAAN,CACrB,kBADqB,EAErB,EAFqB,EAGrB;AACEC,UAAAA,OAAO,EAAE;AACP,4BAAgB;AADT,WADX;AAIEC,UAAAA,IAAI,EAAE;AACJC,YAAAA,QAAQ,EAAEd,IADN;AAEJE,YAAAA,QAAQ,EAAEA;AAFN;AAJR,SAHqB,CAAvB;AAaAE,QAAAA,QAAQ,CAACV,GAAG,CAAC;AAACqB,UAAAA,KAAK,EAACL,QAAQ,CAACM,IAAT,CAAcC,OAArB;AAA6BC,UAAAA,QAAQ,EAACR,QAAQ,CAACM,IAAT,CAAcG,UAApD;AAA+DC,UAAAA,OAAO,EAACV,QAAQ,CAACM,IAAT,CAAcK;AAArF,SAAD,CAAJ,CAAR;;AACA,YAAG,CAAEX,QAAQ,CAACM,IAAT,CAAcC,OAAnB,EAA4B;AAC1Bb,UAAAA,QAAQ,CAACN,WAAW,CAACY,QAAQ,CAACM,IAAT,CAAcK,SAAf,CAAZ,CAAR;AACD;;AACDzB,QAAAA,YAAY,CAAC,OAAD,EAAUc,QAAQ,CAACM,IAAT,CAAcM,KAAxB,CAAZ;AACA1B,QAAAA,YAAY,CAAC,SAAD,EAAYc,QAAQ,CAACM,IAAT,CAAcC,OAAd,GAAwB,MAAxB,GAAiC,OAA7C,CAAZ;AACAZ,QAAAA,OAAO,CAACkB,OAAR,CAAgB,GAAhB;AACD,OAtBD,CAsBE,OAAOC,KAAP,EAAc;AACdf,QAAAA,OAAO,CAACf,GAAR,CAAY8B,KAAK,CAACC,OAAlB;AACA5B,QAAAA,KAAK,CAAC2B,KAAN,CAAY,uBAAZ;AACD;AACF,KA3BD,MA2BO;AACL3B,MAAAA,KAAK,CAAC2B,KAAN,CAAY,SAAZ;AACD;AAAC,GA9BJ;;AA+BE,sBACI;AAAK,IAAA,SAAS,EAAC,MAAf;AAAA,2BACA;AAAK,MAAA,SAAS,EAAC,kBAAf;AAAA,8BACI;AAAK,QAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,eAEI;AAAK,QAAA,SAAS,EAAC,cAAf;AAAA,+BACA;AAAK,UAAA,GAAG,EAAC,iDAAT;AAA2D,UAAA,GAAG,EAAC,QAA/D;AAAwE,UAAA,SAAS,EAAC;AAAlF;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA,cAFJ,eAKI;AAAK,QAAA,SAAS,EAAC,YAAf;AAAA,+BACA;AAAK,UAAA,SAAS,EAAC,iBAAf;AAAA,kCACI;AAAK,YAAA,SAAS,EAAC,YAAf;AAAA,oCACA;AAAO,cAAA,SAAS,EAAC,MAAjB;AAAwB,cAAA,GAAG,EAAC,gBAA5B;AAAA,qCAA6C;AAAM,gBAAA,SAAS,EAAC,QAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA7C;AAAA;AAAA;AAAA;AAAA,oBADA,eAEA;AAAO,cAAA,EAAE,EAAC,gBAAV;AAA2B,cAAA,IAAI,EAAC,MAAhC;AAAuC,cAAA,SAAS,EAAC,YAAjD;AAA8D,cAAA,KAAK,EAAExB,IAArE;AAA2E,cAAA,QAAQ,EAAE0B,CAAC,IAAIzB,OAAO,CAACyB,CAAC,CAACC,MAAF,CAASC,KAAV,CAAjG;AAAmH,cAAA,WAAW,EAAC,UAA/H;AAA0I,cAAA,QAAQ;AAAlJ;AAAA;AAAA;AAAA;AAAA,oBAFA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eAMI;AAAK,YAAA,SAAS,EAAC,YAAf;AAAA,oCACA;AAAO,cAAA,SAAS,EAAC,MAAjB;AAAwB,cAAA,GAAG,EAAC,gBAA5B;AAAA,qCAA6C;AAAM,gBAAA,SAAS,EAAC,QAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA7C;AAAA;AAAA;AAAA;AAAA,oBADA,eAEA;AAAO,cAAA,EAAE,EAAC,gBAAV;AAA2B,cAAA,IAAI,EAAC,UAAhC;AAA2C,cAAA,KAAK,EAAE1B,QAAlD;AAA4D,cAAA,QAAQ,EAAEwB,CAAC,IAAIvB,WAAW,CAACuB,CAAC,CAACC,MAAF,CAASC,KAAV,CAAtF;AAAwG,cAAA,SAAS,EAAC,YAAlH;AAA+H,cAAA,WAAW,EAAC,UAA3I;AAAsJ,cAAA,QAAQ;AAA9J;AAAA;AAAA;AAAA;AAAA,oBAFA;AAAA;AAAA;AAAA;AAAA;AAAA,kBANJ,eAWI;AAAK,YAAA,SAAS,EAAC,YAAf;AAAA,mCACA;AAAO,cAAA,OAAO,EAAEtB,YAAhB;AAA8B,cAAA,IAAI,EAAC,QAAnC;AAA4C,cAAA,KAAK,EAAC;AAAlD;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA,kBAXJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA,cALJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA,UADJ;AA2BH;;GA/DQP,W;UAGUR,W,EACDI,U;;;KAJTI,W;AAiET,eAAeA,WAAf","sourcesContent":["import React, { useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport axios from \"../../axios\";\r\nimport \"./Login.css\";\r\nimport { log } from \"../../features/login/loginSlice\";\r\nimport { useHistory } from \"react-router\";\r\nimport { setAuthToken } from \"../../localStorage\";\r\nimport { toast } from \"../../components/Toast/Toast\";\r\nimport { currentShop } from \"../../features/shop/shopSlice\";\r\n\r\nfunction LoginScreen() {\r\n  const [name, setName] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  const handleSubmit = async () => {\r\n    if (name.trim().length > 0 && password.trim().length > 0) {\r\n      try {\r\n        console.log(name, typeof(password));\r\n        const response = await axios.post(\r\n          \"/api-token-auth/\",\r\n          {},\r\n          {\r\n            headers: {\r\n              \"Content-Type\": \"application/json\",\r\n            },\r\n            auth: {\r\n              username: name,\r\n              password: password,\r\n            },\r\n          }\r\n        );\r\n        dispatch(log({admin:response.data.isAdmin,employee:response.data.employeeId,company:response.data.companyId}));\r\n        if(!(response.data.isAdmin)){\r\n          dispatch(currentShop(response.data.companyId))\r\n        }\r\n        setAuthToken(\"token\", response.data.token);\r\n        setAuthToken(\"isAdmin\", response.data.isAdmin ? \"true\" : \"false\");\r\n        history.replace(\"/\");\r\n      } catch (error) {\r\n        console.log(error.message);\r\n        toast.error(\"Authentication denied\");\r\n      }\r\n    } else {\r\n      toast.error(\"no Data\");\r\n    }}\r\n    return (\r\n        <div className=\"main\">\r\n        <div className=\"container__login\">\r\n            <div className=\"logo\">Login Form</div>\r\n            <div className=\"imgcontainer\">\r\n            <img src=\"https://www.w3schools.com/howto/img_avatar2.png\" alt=\"Avatar\" className=\"avatar\"/>\r\n            </div>\r\n            <div className=\"login-item\">\r\n            <div className=\"form form-login\">\r\n                <div className=\"form-field\">\r\n                <label className=\"user\" for=\"login-username\"><span className=\"hidden\">Username</span></label>\r\n                <input id=\"login-username\" type=\"text\" className=\"form-input\" value={name} onChange={e => setName(e.target.value)} placeholder=\"Username\" required/>\r\n                </div>\r\n\r\n                <div className=\"form-field\">\r\n                <label className=\"lock\" for=\"login-password\"><span className=\"hidden\">Password</span></label>\r\n                <input id=\"login-password\" type=\"password\" value={password} onChange={e => setPassword(e.target.value)} className=\"form-input\" placeholder=\"Password\" required/>\r\n                </div>\r\n\r\n                <div className=\"form-field\">\r\n                <input onClick={handleSubmit} type=\"submit\" value=\"Log in\"/>\r\n                </div>\r\n            </div>\r\n            </div>\r\n        </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default LoginScreen\r\n"]},"metadata":{},"sourceType":"module"}